properties:
  id:
    $ref: '#/components/schemas/CodeholderId'

  oldCode:
    type: string
    nullable: true
    minLength: 4
    maxLength: 4
    readOnly: true
    pattern: ^[a-z]$
    description: The old four-letter UEA code of the codeholder
    x-queryable: true
    x-searchable: false

  newCode:
    type: string
    minLength: 6
    maxLength: 6
    pattern: ^[a-z]$
    description: The new six-letter UEA code of the codeholder
    x-queryable: true
    x-searchable: false

  newCode_modTime:
    $ref: '#/components/schemas/CodeholderModTime'

  newCode_modBy:
    $ref: '#/components/schemas/CodeholderModBy'

  newCode_modCmt:
    $ref: '#/components/schemas/CodeholderModCmt'

  codeholderType:
    allOf:
      - $ref: '#/components/schemas/CodeholderType'
      - x-queryable: true
        x-searchable: false

  password:
    type: string
    format: password
    writeOnly: true
    nullable: true
    description: The codeholder's password, if null the codeholder is not able to login

  password_modTime:
    $ref: '#/components/schemas/CodeholderModTime'

  address:
    allOf:
      - nullable: true
        description: The codeholder's normalized postal address. The country of the address is only used for recieving mail, and the separate `feeCountry` is used to determine the membership fee.
      - $ref: '#/components/schemas/PostalAddress'

  address_modTime:
    $ref: '#/components/schemas/CodeholderModTime'

  address_modBy:
    $ref: '#/components/schemas/CodeholderModBy'

  address_modCmt:
    $ref: '#/components/schemas/CodeholderModCmt'

  feeCountry:
    type: string
    nullable: true
    minLength: 2
    maxLength: 2
    pattern: ^[a-z]{2}$
    description: The codeholder's fee country. The ISO 3166-1 alpha-2 code of a `Country`. If `null` defaults to the country in the address, if defined. If not defined, the codeholder may not renew their membership without first setting their address.
    x-queryable: true
    x-searchable: false

  feeCountry_modTime:
    $ref: '#/components/schemas/CodeholderModTime'

  feeCountry_modBy:
    $ref: '#/components/schemas/CodeholderModBy'

  feeCountry_modCmt:
    $ref: '#/components/schemas/CodeholderModCmt'

  addressLatin:
    allOf:
      - nullable: true
        readOnly: true
        description: The codeholder's latinized postal address, for searching.
      - $ref: '#/components/schemas/PostalAddress'

  addressLatinDisplay:
    type: string
    nullable: true
    readOnly: true
    description: The codeholder's latinized postal address, for display


  addressPostal:
    type: string
    nullable: true
    readOnly: true
    description: The codeholder's native postal address, for shipping labels

  email:
    type: string
    format: email
    minLength: 3
    maxLength: 200
    nullable: true
    pattern: ^[^\n]*$
    description: The codeholder's contact and login email address. If undefined, the codeholder may not login.
    x-queryable: true
    x-searchable: true

  email_modTime:
    $ref: '#/components/schemas/CodeholderModTime'

  email_modBy:
    $ref: '#/components/schemas/CodeholderModBy'

  email_modCmt:
    $ref: '#/components/schemas/CodeholderModCmt'

  enabled:
    type: boolean
    default: true
    description: Whether the codeholder may login
    x-queryable: true
    x-searchable: false

  enabled_modTime:
    $ref: '#/components/schemas/CodeholderModTime'

  enabled_modBy:
    $ref: '#/components/schemas/CodeholderModBy'

  enabled_modCmt:
    $ref: '#/components/schemas/CodeholderModCmt'

  notes:
    type: string
    default: ""
    maxLength: 10000
    description: Administrative notes on the codeholder
    x-queryable: true
    x-searchable: true

  notes_modTime:
    $ref: '#/components/schemas/CodeholderModTime'

  notes_modBy:
    $ref: '#/components/schemas/CodeholderModBy'

  notes_modCmt:
    $ref: '#/components/schemas/CodeholderModCmt'

  officePhone:
    allOf:
      - description: The office phone number of the codeholder
        nullable: true
        x-queryable: true
        x-searchable: true
      - $ref: '#/components/schemas/PhoneNumber'

  officePhone_modTime:
    $ref: '#/components/schemas/CodeholderModTime'

  officePhone_modBy:
    $ref: '#/components/schemas/CodeholderModBy'

  officePhone_modCmt:
    $ref: '#/components/schemas/CodeholderModCmt'

  officePhoneFormatted:
    type: string
    readOnly: true
    nullable: true
    description: The office phone number of the codeholder formatted according to its country code

  isDead:
    type: boolean
    default: false
    description: Whether the codeholder is dead (`HumanCodeholder`) or has ceased operations (`OrgCodeholder`)
    x-queryable: true
    x-searchable: false

  isDead_modTime:
    $ref: '#/components/schemas/CodeholderModTime'

  isDead_modBy:
    $ref: '#/components/schemas/CodeholderModBy'

  isDead_modCmt:
    $ref: '#/components/schemas/CodeholderModCmt'

required:
  - newCode
  - enabled
  - codeholderType
  - isDead
