parameters:
  - name: newsletterId
    in: path
    required: true
    description: The newsletter id
    schema:
      type: number
      format: uint32

post:
  summary: Sends a notif template for this newsletter to all subscribers
  description: >
    Requires permissions: `newsletters.<org>.send`, `notif_templates.read.<org>`
  requestBody:
    required: true
    content:
      application/vnd.msgpack:
        schema:
          properties:
            notifTemplateId:
              type: number
              format: uint32
              description: >
                The id of the notif template to send.


                Must have `intent = newsletter` and be of the same org as the newsletter.

            deleteTemplateOnComplete:
              type: boolean
              default: false
              description: >
                Whether to delete the notif template once all the codeholder notifications have been sent. This is useful for single-use templates.


                If true, the permission `notif_templates.delete.<org>` is required.
          required:
            - notifTemplateId
  responses:
    '202':
      description: Sent
    '404':
      description: Not found